# 🏗️ 功能总清单 — 强直性脊柱炎（AS）App（修订版）

> **用途**：HackVortex Codestorm 5 项目 PRD（可直接据此拆任务 / 开发 / 提交 DevPost）  
> **定位**：教育与自我管理工具（非医疗诊断），以交互记录 + 微课 + 可视化促进健康习惯和就医沟通。  
> **差异化定位**：这是**首个聚焦强直性脊柱炎（AS）全病程管理**的患者工具，覆盖症状追踪、用药、关节外表现、诱因分析、就诊报告和教育支持，区别于常见的单一运动或饮食记录类 App。

---

## 0) 目标、用户与范围

* **目标**：
  * 让 AS 患者能**快速记录**关键症状、**看到趋势**、**理解诱因**、**准备就诊材料**。
  * 以**简单语言**和**微课**强化康复和生活方式教育。
* **核心用户**：确诊/可疑 AS 患者；照护者；物理治疗/风湿科医生用于沟通。  
* **范围声明**：教育与自助管理；**不提供医疗诊断或治疗决策**；所有数据默认**本地优先**，可选同步。

---

## 1) 📊 症状与病情追踪

- 疼痛打分（0–10，表情 + 数字）  
- 晨僵时长（分钟档：0/15/30/60/90/120+）  
- 疲劳程度（3–5 档：轻 / 中 / 重，可扩展到 0–10）  
- 活动度测试（颈部、腰椎、胸廓呼吸扩张，提供教程与注意事项）  
- 一键**发作（flare）**记录（起止时间、诱因：睡眠/姿势/劳累/感染/情绪/天气 等）  
- 量表整合（可选）：BASDAI / BASFI / ASQoL / BASMI 评分与趋势  

---

## 2) 💊 用药管理

- 药物分类：生物制剂（TNFi/IL-17i/JAKi）、NSAIDs、csDMARDs（如 MTX）、糖皮质激素  
- 服药/注射提醒（时间、途径、部位、批号/批次）  
- 漏药/延迟记录（原因：忘记/不适/供应问题等）  
- 药效主观打分（用药后疼痛/僵硬改善 0–10，或“变好/不变/变差”）  
- 不良反应勾选（皮疹、感染、胃痛、注射部位反应等）  
- 监测提醒（肝功能、肾功能、血常规、血脂、影像复查）  

---

## 3) 🦴 关节外表现（EAMs）

- 葡萄膜炎：眼红/痛/畏光/模糊（多选 + 严重度）  
- IBD：腹泻/便血/腹痛（频次、时长）  
- 银屑病：皮疹/瘙痒/脱屑（部位、面积估计）  
- 外周关节炎：部位（膝/踝/肩/指趾等）、肿胀/压痛  
- 附着点炎（足跟、跟腱等）、香肠指趾、胸廓受限  
- 感染风险标记（持续发热、咳嗽等预警）  

---

## 4) 🧘‍♂️ 运动与康复

- 个性化拉伸/康复方案（颈、腰、髋为主；根据症状自动推荐难度）  
- 视频演示 + 打卡（每个动作可记录“舒服/加重/无变化”）  
- 姿势管理（坐姿/睡姿/床垫建议，短文+插图）  
- 睡眠记录（时长、夜间疼痛次数；支持穿戴设备导入 *可选*）  

---

## 5) 🍽️ 生活方式与诱因

- 睡眠（时长、质量：优/可/差）  
- 饮食（清淡/均衡/油腻/辛辣/酒精等）  
- 天气（自动拉取或手选：湿冷/干燥/温差大/低气压）  
- 情绪（平稳/焦虑/低落/易怒）  
- 工作/学习强度（轻/中/重）  
- **诱因关联分析**（月报：Top 3 触发因素 + 发生概率/伴随指标）  

---

## 6) 🧾 就诊与检查管理

- 检查提醒（血检、影像、功能评估）  
- 检查结果存档（PDF/图片上传，标题/日期/要点摘要；OCR 可选）  
- **就诊前报告**（近 4–8 周趋势 + 用药 + 发作 + EAMs + 关键备注，一页 A4）  
- 就诊日历（预约/输液/注射提醒，重复规则）  
- 疫苗接种记录（流感/肺炎/新冠/带状疱疹等）  

---

## 7) 📈 数据可视化与报告

- 日趋势：疼痛/僵硬/疲劳折线图  
- 周/月趋势：NSAIDs 使用天数、发作次数、康复完成率  
- **热力日历**：颜色深浅代表疼痛程度或综合分  
- **AI 简报**（基于规则/简单回归）：  
  - “本周疼痛较上周下降 1.5 分”  
  - “发作常与熬夜关联”  
- PDF 导出（A4 一页）  
- 二维码分享（限时只读 / 本地静态页）  

---

## 8) 📚 教育与支持

- AS 科普库（简单语言 + 插图/短视频）  
- 康复小贴士（旅行、久坐、运动注意事项）  
- 饮食参考（抗炎饮食）  
- 女性健康（经期疼痛、妊娠期用药提示）  
- 患者社区（可选：跳转至可信公益组织/论坛，或本地匿名讨论 *后续*）  

---

## 9) ⚙️ 系统与隐私

- 长辈模式（更大字体、更少选项）  
- 深色模式/高对比度  
- 语音输入（要害字段）  
- **离线记录**，联网自动同步（可选登录）  
- 数据加密与隐私设置（本地加密、导出/删除、分享授权）  

---

## 🗂️ 数据模型（草案）

```json
{
  "UserSettings": { "lang": "zh-CN", "theme": "light|dark|senior", "units": "metric", "privacy": {"shareReadOnly": false} },
  "DailyEntry": {
    "id": "uuid",
    "date": "YYYY-MM-DD",
    "pain": 0,
    "morningStiffnessMin": 0,
    "fatigue": 0,
    "mobilityTest": { "neck": null, "lumbar": null, "chestExpansion": null },
    "sleep": { "hours": 7, "nightPainCount": 0 },
    "lifestyle": { "diet": "balanced|oily|spicy|alcohol", "mood": "ok|anxious|low|irritable", "workload": "light|mid|heavy", "weather": "humidCold|dry|lowPressure|tempGap" },
    "exercise": [{ "name": "stretch" , "minutes": 10, "feeling": "better|same|worse" }],
    "medUsage": [{ "medId": "uuid", "takenAt": "ISO", "dose": "text", "route": "po|sc|iv", "site": "text", "batch": "text", "effect": 5, "ae": ["rash", "giPain"] }],
    "flare": { "on": false, "start": "ISO", "end": "ISO", "triggers": ["sleep", "posture", "overuse", "infection", "emotion", "weather" ] },
    "eams": [{ "type": "uveitis|ibd|psoriasis|peripheralArthritis|enthesitis|dactylitis|chestLimit", "severity": 0, "notes": "text", "photos": ["url"] }],
    "notes": "text",
    "scores": { "BASDAI": null, "BASFI": null, "ASQoL": null, "BASMI": null }
  },
  "Medication": { "id": "uuid", "name": "text", "class": "TNFi|IL17i|JAKi|NSAID|csDMARD|steroid", "plan": { "dose": "text", "freq": "cron/rrule", "route": "po|sc|iv" }, "monitor": ["LFT", "RFT", "CBC", "Lipid", "Imaging"] },
  "Appointment": { "id": "uuid", "title": "Clinic visit", "when": "ISO", "remind": "mins", "type": "visit|infusion|injection|test" },
  "TestResult": { "id": "uuid", "type": "blood|imaging|function", "date": "YYYY-MM-DD", "file": "url", "summary": "text" },
  "Vaccine": { "id": "uuid", "name": "Influenza|Pneumonia|COVID|Zoster", "date": "YYYY-MM-DD", "batch": "text" },
  "Report": { "rangeWeeks": 8, "charts": ["pain","stiffness","fatigue"], "highlights": ["text"] }
}
```

---

## 🧭 界面与路由（信息架构）

- `/home`：今日概览（快速记录卡片 + 发作开关 + 微课）  
- `/track`：症状/发作/生活方式完整表单（分段）  
- `/meds`：用药清单、提醒、不良反应、监测计划  
- `/eams`：关节外表现录入与图库  
- `/rehab`：康复计划 + 视频 + 打卡反馈  
- `/reports`：趋势图、热力日历、AI 简报、PDF/二维码分享  
- `/clinic`：日历与检查、就诊前一页报告、文档库  
- `/library`：教育内容库  
- `/settings`：外观/隐私/数据导入导出  

---

## 🧪 验证与可用性

- 关键用例完成时间：  
  - 记录核心症状 ≤30 秒；添加发作 ≤20 秒；记录一次用药 ≤15 秒。  
- 空数据与失败态：  
  - 无网络 / API 失败 → 保证离线可用；天气手动选择兜底。  
- 无障碍：  
  - 字号切换、色盲友好调色板、键盘可达、语音输入入口。  

**KPI 指标**：  
- 留存率目标：≥50% 用户连续使用 ≥7 天。  
- 完成率目标：≥80% 用户能在 30 秒内完成每日打卡。  

---

## 🧍 用户旅程（User Journey Map）

1. **早晨**：患者 30 秒完成疼痛/晨僵/疲劳打卡。  
2. **午间**：收到生物制剂注射提醒 → 一键确认并记录。  
3. **晚上**：完成 5 分钟拉伸 → 打卡反馈“舒服”。  
4. **周末**：生成过去 8 周 PDF → 带去门诊就诊。  
5. **月度**：AI 简报提示“熬夜与发作相关” → 打开教育文章学习。  

---

## ⚠️ 风险与限制声明

- **风险**：患者可能误读结果；记录遗漏影响趋势。  
- **限制**：不能替代影像学诊断或医生判断；教育内容仅作一般指导。  
- **缓解措施**：  
  - 应用内所有趋势提示均以“教育型”语言呈现。  
  - 若出现高热、视物模糊或严重症状 → 系统自动弹窗提示“请立即就医”。  

---

## 🛠️ 技术方案（建议）

- 前端：React + Vite + Tailwind + Recharts + Day.js；PWA（可选）  
- 本地：IndexedDB / localStorage；文件选择器 + 预览；本地 PDF 生成（pdf-lib / jsPDF）  
- 同步（可选 V1.5+）：Supabase/Firebase + RLS（行级安全）+ 匿名只读分享 URL（带过期）  
- 语音输入：Web Speech API（兼容性兜底为手动）  
- 天气：公开天气 API；失败时允许手选  

---

## 🚦 里程碑与范围划分

**MVP（黑客松可交付 3–5 天）**  
- 症状三件套（疼痛/晨僵/疲劳）+ 发作记录（诱因多选）  
- 用药清单 + 一键记录 + 提醒（本地通知）  
- 周/月趋势 + 热力日历（疼痛）  
- 就诊前一页 PDF（近 4–8 周）  
- 教育微课（本地）  
- 长辈模式 + 深色模式 + 数据导出/删除  

**V1（赛后 2–3 周）**  
- 量表（BASDAI/BASFI/ASQoL/BASMI）  
- 监测提醒与不良反应模板  
- 康复视频 + 动作反馈闭环  
- 诱因分析（简单回归/相关性）+ AI 简报  
- 限时只读分享（二维码）  

**V1.5**  
- OCR 体检/报告提取要点  
- 可穿戴数据导入（睡眠/步数）  

**V2**  
- 多端同步 + 端到端加密  
- 个性化推荐（基于历史与反馈）  

---

## 📈 扩展规划（V3+）

- **可穿戴设备集成**：自动采集睡眠、步数、心率变异性，与发作趋势比对。  
- **与电子病历/远程门诊对接**：医生可直接查看患者数据。  
- **匿名大数据研究平台**：供科研机构分析 AS 群体真实世界数据。  

---

## 📦 DevPost 提交清单

- 线上演示链接（Vercel/Netlify）  
- 开源仓库（README：安装/功能/截图/GIF/免责声明）  
- 项目描述（问题→方案→教育价值→创新点→路线图）  
- 安装说明（`npm i && npm run dev`）  
- 团队信息与分工（PM/前端/医学顾问/数据分析）  
- 演示视频 1–3 分钟脚本  
- **UI 线框图/功能架构图**（附件）  

---

## 🎥 演示视频脚本

1. **定位**（10s）：这是一个面向 AS 患者的教育与自我管理工具。  
2. **快速记录**（30s）：演示 30 秒记录疼痛/晨僵/疲劳 + 勾选发作和诱因。  
3. **用药**（20s）：展示一键记录与提醒，标注不良反应。  
4. **趋势**（20s）：周/月趋势 + 热力日历，看到“熬夜→发作”的提示语。  
5. **就诊 PDF**（20s）：一键导出近 8 周 A4 报告。  
6. **教育**（10s）：打开一个 2 分钟可读的科普文。  
7. **隐私**（10s）：本地数据、导出/删除、长辈模式。  
   **结尾**：声明不构成医疗建议，欢迎贡献内容。  

---

## ⚠️ 免责声明

本应用仅用于健康教育与自我管理，**不构成医疗建议**；如症状持续或加重，请及时就医。
